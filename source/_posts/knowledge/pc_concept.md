---
title: 计算机底层技术名词概览
date: 2024-01-02 11:26:22
#tags: []
categories: 理解计算机
---

## 晶体管

CPU中的晶体管有3个连接端， 其中一个输入端的电平高低能决定另外两端是否能导通。有两种型号的晶体管，一个高电平连通，一个低电平连通。

## 逻辑门

利用多个晶体管经过各种搭配就可以实现各种逻辑运算(与， 或， 非， 与非， 或非， 异或)， 这些门电路称为逻辑门。

## 加法器

门电路组合起来可以做加法器

## 算数逻辑单元 ALU

加法器可以经过扩展和修改，就有了乘法器，减法器，除法器。把它们打包在一起，加一些控制电路，就既可以做逻辑运算，也可以做算术运算。就是算术逻辑单元，是CPU中非常核心的部件。

## 指令集

CPU中，不同的指令用不同的机器码表示，比如 0000 0001 表示加法，0000 0002 表示减法，所有的指令构成了指令集。对各种指令集进行配列组合已完成特定的功能的过程就是编程。

指令集又分为两个流派，一是精简指令集，指令长度固定，一个指令只完成一个基本操作。 一个是复杂指令集，一个指令可以完成一些复杂操作。x86属于复杂指令集。

## 寄存器

CPU工作过程中需要存储一些数据，比如要执行的指令地址，存储要计算的数据等，如果都在内存中读取，速度会很慢，所以CPU内部有一些电路用来存储数据叫做寄存器。

## 汇编语言

用一些助记符号代替机器码，比如 ADD 代表机器码 0000 0001， 用助记符号来编程的语言就是汇编语言。

## 高级语言

助记符与CPU指令集相关联，人们有发明了高级语言，可以用接近人类语言的方式描述程序的功能，比如 `int sum = a + b;` 然后又发明了编译器，可以将高级语言变成机器指令，这个过程叫做编译。

## 指令执行过程

读取指令 -> 指令译码 -> 指令执行 -> 数据回写

## 流水线

指令执行过程分为了几个步骤，这几个步骤就可以用不同的电路来做，第一条指令执行到指令译码的时候，读取指令的电路已经开始读取第二条指令了，类似于工厂流水线。

## 流水线冒险

结构冒险，出现硬件资源竞争；  
数据冒险，后面的指令等待前面的指令完成数据读写；  
控制冒险，后面的指令需要根据前面的执行结果来决定下一步去哪执行；

## 缓存

读取某个数据的时候，其周边的数据也大概率会被访问，来回读取太费劲，CPU内部就增加了一些电路用来保存一些内存的数据，这个技术叫做缓存

## 缓存行

CPU通常以 64 字节大小为单元管理缓存，这个单元叫做缓存行

## 指令缓存和数据缓存

为了缓解流水线结构冒险问题，将缓存分为两块，分别存储数据和指令。

## L1/L2/L3 缓存

之前的数据缓存和指令缓存那一层叫L1缓存，然后又增加了L2缓存。L1 和 L2 都是在一个CPU核心里。之后又加了一块较大的缓存，供所有CPU核心公用，称为L3缓存。

## 原子操作

不可切分的操作。

## 缓存失效

L2的缓存是在各自的CPU核心里的，如果多个核心读取的是同一个缓存行的数据，会出现不一致的问题，需要一定的策略来保证缓存的一致性。

## 乱序执行

指令执行的时候，一些指令没有前后依赖关系，可以一起执行。之后再将执行结果进行重新排列。指令执行的过程变成了 指令分发到不同的执行单元 -> 多个执行单位乱序执行 -> 乱序执行结果重新排序

## 静态预测

为了缓解流水线控制冒险问题，先预测分支结果并执行某一分支，如果预测正确就将预测的执行结果拿来用，如果不正确就丢弃，执行另一分支。

## 动态预测

一些分支两边的概率并不是 50% 对 50%，统计最近多次的跳转结果，根据其最近跳转次数来进行预测，这个技术也叫分支预测。

## SIMD

单指令多数据流(Single Instruction Multiple Data)。 扩大一些寄存器的长度，比如128位，这样可以存储4个32位的整数。新增一些指令，可以并行计算这些数据。

## 超线程

每个CPU里都有一些不同的电路，比如整数运算电路，浮点型运算电路。不同指令用到的电路可能不一样，为了充分利用闲置的电路。新增加一套寄存器，内部协调好两套寄存器使用的缓存和ALU。比如可以同时执行整数运算和浮点运算，对外看起来像是两个线程。 这个新增寄存器，复用缓存和计算资源的技术叫做超线程。

## 虚拟内存

程序访问的内存地址都不是真实的内存地址，访问真实地址内存的时候需要由一个MMU(内存管理单元) 将地址映射到真实的内存。内存是按照页来管理的，通常一页为4kb。

## 分页交换

系统内存资源有限，操作系统会将长时间不用的内存换到硬盘上，并做个标记，如果之后谁访问该内存，就会触发一个页错误中断，操作系统再去把那个页换回来。

## 虚拟地址翻译

虚拟内存一般是多级页表，虚拟地址到真实地址需要计算， 这个过程叫虚拟地址翻译。

## 地址翻译缓存

和缓存行类似，翻译过的地址，接下来一段时间大概率还会被用到，缓存翻译地址能够减少翻译所做计算。

## GPU和CPU

GPU运算单元比较多，可以进行数据的批量计算，类似 CPU 的 SIMD。