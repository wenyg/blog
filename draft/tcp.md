---
title: 回头再聊 TCP
date: 2024-01-11 17:04:40
#tags: []
categories: 理解计算机 
---


- ICMP 可用于发现链路上的最小 MTU
- 一条sock连接有五元组(Proto, SourceIp, DestIp, SourcePort, DestPort) 组成，任意一个改变都是可以是一个新的连接。
  比如两台机器都有 2个IP，2个端口，用于TCP连接。那么他们之间可以创建 (2*2*2*2)*2 = 32 个 TCP 连接。

## TCP 字段

- 序号， 发送的字节号，TCP中每个字节都被编号了
- 确认号，期待接受的下一个字节序号，它是累计确认。
- TCP头长度，
- URG 没用
- PSH，TCP_NODELY 设置的
- ACK，1表示确认号是有效的。
- RST，拒收
- SYN，用于表示发起请求，和接受请求。ACK=0的时候是发起请求，ACK=1的时候会接受请求。
- FIN, 用于断开连接。
- 滑动窗口，表示从被确认的字节起还可以接受多少字节。为0时表示，表示不能再收了。之后想在收，就发一个同样确认号，但是窗口大小值部位0的段，通知发送端继续发。
- 
- 


## listen

